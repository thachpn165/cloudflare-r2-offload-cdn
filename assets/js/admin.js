(function(s){const n={init(){this.cacheElements(),this.bindEvents(),s(".cloudflare-r2-offload-cdn-form-actions").hide()},cacheElements(){this.$tabs=s(".cloudflare-r2-offload-cdn-tabs li"),this.$tabContents=s(".cloudflare-r2-offload-cdn-tab-content"),this.$form=s("#cloudflare-r2-offload-cdn-settings-form"),this.$saveBtn=s(".cloudflare-r2-offload-cdn-save-btn"),this.$toast=s("#cloudflare-r2-offload-cdn-toast")},bindEvents(){this.$tabs.on("click",this.handleTabClick.bind(this)),this.$form.on("submit",this.handleFormSubmit.bind(this)),s(document).on("click",".cloudflare-r2-offload-cdn-accordion-header",this.handleAccordionClick)},handleTabClick(t){const a=s(t.currentTarget),e=a.data("tab");this.$tabs.removeClass("active"),a.addClass("active"),this.$tabContents.removeClass("active"),s("#tab-"+e).addClass("active"),s(".cloudflare-r2-offload-cdn-form-actions").toggle(e!=="dashboard")},handleAccordionClick(t){const a=s(t.currentTarget),e=a.next(".cloudflare-r2-offload-cdn-accordion-content");a.toggleClass("active"),e.toggleClass("active")},handleFormSubmit(t){if(t.preventDefault(),this.$saveBtn.hasClass("is-loading"))return;this.setLoading(!0);const a=this.$form.serialize();s.ajax({url:myPluginAdmin.ajaxUrl,type:"POST",data:a+"&action=cloudflare_r2_offload_cdn_save_settings",success:this.handleSaveSuccess.bind(this),error:this.handleSaveError.bind(this),complete:()=>this.setLoading(!1)})},handleSaveSuccess(t){t.success?this.showToast(t.data.message,"success"):this.showToast(t.data.message||myPluginAdmin.strings.error,"error")},handleSaveError(){this.showToast(myPluginAdmin.strings.error,"error")},setLoading(t){this.$saveBtn.toggleClass("is-loading",t)},showToast(t,a="success"){const e=a==="success"?"yes-alt":"warning",o=s("<div>",{class:`cloudflare-r2-offload-cdn-toast-item ${a}`}).append(s("<span>",{class:`dashicons dashicons-${e}`}),s("<span>").text(t));this.$toast.append(o),setTimeout(()=>{o.addClass("fade-out"),setTimeout(()=>o.remove(),300)},3e3)}};s(document).ready(()=>{n.init()})})(jQuery);
//# sourceMappingURL=admin.js.map
